!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("prop-types"),require("react-emotion")):"function"==typeof define&&define.amd?define(["react","prop-types","react-emotion"],t):"object"==typeof exports?exports.Dropdown=t(require("react"),require("prop-types"),require("react-emotion")):(e.academyatoms=e.academyatoms||{},e.academyatoms.Dropdown=t(e.React,e.PropTypes,e[void 0]))}(this,function(e,t,o){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=55)}({0:function(t,o){t.exports=e},1:function(e,o){e.exports=t},2:function(e,t){e.exports=o},54:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.HOVER_BACKGROUND_COLOR="#0055a6",t.HOVER_FOREGROUND_COLOR="#FFF",t.DISABLED_HOVER_BACKGROUND_COLOR="#F6F6F6",t.DISABLED_HOVER_FOREGROUND_COLOR="#333333",t.KEYBOARD_SELECTED_BACKGROUND_COLOR="#9EC9F3",t.KEYBOARD_SELECTED_FOREGROUND_COLOR="#FFF",t.DISABLED_CURSOR="default",t.ENABLED_CURSOR="pointer",t.FONT_SIZE="1rem",t.MOBILE_FONT_SIZE="0.8rem",t.INDICATOR_FONT_SIZE="0.85rem",t.INDICATOR_MOBILE_FONT_SIZE="0.45rem"},55:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=d(o(0)),s=d(o(1)),a=o(2),l=o(54);function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}var u=(0,a.css)("@media screen and (min-width:768px){font-size:0.85rem;}font-size:0.45rem;margin-left:auto;padding-left:0.2rem;"),p=(0,a.css)("max-width:90%;overflow:hidden;text-overflow:ellipsis;text-align:left;"),f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={isDropdownOpen:!1,activeListItem:o.props.initiallySelectedOption&&o.props.initiallySelectedOption<o.props.DropdownOptions.length?o.props.initiallySelectedOption:0,selectedOption:o.props.initiallySelectedOption&&o.props.initiallySelectedOption<o.props.DropdownOptions.length?o.props.DropdownOptions[o.props.initiallySelectedOption]:o.placeholderOption(),hoveredListItem:0,keyPressed:" ",matchingOptions:[]},o.onSelectWrapper=o.onSelectWrapper.bind(o),o.renderButtonContents=o.renderButtonContents.bind(o),o.handleClickOutside=o.handleClickOutside.bind(o),o.handleKeyboardEvents=o.handleKeyboardEvents.bind(o),o.toggleDropdownState=o.toggleDropdownState.bind(o),o.setFocusonArrowUp=o.setFocusonArrowUp.bind(o),o.setFocusonArrowDownAndTab=o.setFocusonArrowDownAndTab.bind(o),o.setNewFocus=o.setNewFocus.bind(o),o.setNodesHoverPosition=o.setNodesHoverPosition.bind(o),o.setWrapperRef=r.default.createRef(),o.listRef=r.default.createRef(),o.dropDownRef=r.default.createRef(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),i(t,[{key:"componentWillReceiveProps",value:function(e){this.props.initiallySelectedOption!==e.initiallySelectedOption&&this.setState({selectedOption:e.initiallySelectedOption<e.DropdownOptions.length?e.DropdownOptions[e.initiallySelectedOption]:e.DropdownOptions[0],activeListItem:e.initiallySelectedOption<e.DropdownOptions.length?e.initiallySelectedOption:0})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyboardEvents),document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"onSelectWrapper",value:function(e,t,o){var n=this;e.disabled||(this.setState({selectedOption:e,activeListItem:o},function(){return n.toggleDropdownState()}),t(o,e.title))}},{key:"setNewFocus",value:function(e,t){var o=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=e.key||e.code,s=this.props.DropdownOptions,a=this.state,l=a.selectedOption,d=a.activeListItem;i.length>0&&(l=s[i[0]],d=t),this.setState(Object.assign({},this.state,{activeListItem:d,selectedOption:l,matchingOptions:i,hoveredListItem:t,keyPressed:r}),function(){n.length>0&&n[t].firstElementChild.focus(),o.scrollToOffset()})}},{key:"setFocusonArrowUp",value:function(e){var t=this.state.hoveredListItem,o=this.props.DropdownOptions,n=[].concat(c(document.querySelectorAll(".dp_list_options")));0===t?this.setNodesHoverPosition(o.length-1,e,n):t>0&&this.setNodesHoverPosition(t-1,e,n)}},{key:"setFocusonArrowDownAndTab",value:function(e){var t=this.state.hoveredListItem,o=this.props.DropdownOptions,n=[].concat(c(document.querySelectorAll(".dp_list_options")));o.length-1===t?this.setNodesHoverPosition(0,e,n):o.length-1!==t&&this.setNodesHoverPosition(t+1,e,n)}},{key:"setNodesHoverPosition",value:function(e,t,o){var n=o;n[e].firstElementChild.focus(),this.setNewFocus(t,e,n)}},{key:"placeholderOption",value:function(){return this.props.placeholderOption?this.props.placeholderOption:this.props.DropdownOptions[0]}},{key:"handleClickOutside",value:function(e){this.setWrapperRef.current&&!this.setWrapperRef.current.contains(e.target)&&this.toggleDropdownState()}},{key:"toggleDropdownState",value:function(){var e=this;if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{preventDefault:function(){}}).preventDefault(),this.state.isDropdownOpen){var t=this.dropDownRef.current,o=void 0===t?{}:t;this.setState(Object.assign({},this.state,{isDropdownOpen:!1}),function(){return o.focus()})}else this.setState(Object.assign({},this.state,{isDropdownOpen:!0,hoveredListItem:this.state.activeListItem}),function(){e.scrollToOffset(".active"),document.querySelector("#menuRef .active a").focus()})}},{key:"handleKeyboardEvents",value:function(e){var t=this,o=this.state,n=o.hoveredListItem,i=o.isDropdownOpen,r=o.activeListItem,s=this.props,a=s.DropdownOptions,l=s.onSelectOption,d=e.key||e.code;switch(d){case"ArrowDown":case"Tab":e.preventDefault(),this.setFocusonArrowDownAndTab(e);break;case"ArrowUp":e.preventDefault(),this.setFocusonArrowUp(e);break;case"Enter":e.preventDefault(),i?(this.onSelectWrapper(n>=0?a[n]:a[r],l,n),this.setState(Object.assign({},this.state,{hoveredListItem:0,keyPressed:d}))):this.setState(Object.assign({},this.state,{hoveredListItem:0,keyPressed:d}),function(){return t.toggleDropdownState(e)});break;case"Escape":e.preventDefault(),this.setState(Object.assign({},this.state,{hoveredListItem:n,keyPressed:d}),function(){return t.toggleDropdownState(e)});break;case" ":e.preventDefault(),this.setState(Object.assign({},this.state,{hoveredListItem:0,keyPressed:d}),function(){return t.toggleDropdownState(e)});break;default:e.preventDefault(),this.lexicalSearch(e,d,a)}return!0}},{key:"lexicalSearch",value:function(e,t,o){var n=[].concat(c(document.querySelectorAll(".dp_list_options"))),i=this.state.matchingOptions;if(this.state.keyPressed===t&&i.length>0)i.push(i.splice(0,1)[0]),this.setNewFocus(e,i[0],n,i);else{var r=o.map(function(e,o){return e.title.startsWith(t)||e.title.startsWith(t.toUpperCase())?o:null}).filter(function(e){return null!==e});r.length>0&&this.setNewFocus(e,r[0],n,r)}}},{key:"scrollToOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".keySelected";if(this.state.hoveredListItem>0)if(document.querySelector(e)){var t=document.querySelector(e).offsetTop;document.getElementById("customDropdownList").scrollTop=t}else if(document.querySelector(".disabledKeySelected")){var o=document.querySelector(".disabledKeySelected").offsetTop;document.getElementById("customDropdownList").scrollTop=o}}},{key:"manageActiveListeners",value:function(){this.state.isDropdownOpen?(document.addEventListener("keydown",this.handleKeyboardEvents),document.addEventListener("mousedown",this.handleClickOutside)):(document.removeEventListener("keydown",this.handleKeyboardEvents),document.removeEventListener("mousedown",this.handleClickOutside))}},{key:"renderButtonContents",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"object"===(void 0===e?"undefined":n(e))?r.default.createElement("div",{className:""+p},r.default.createElement("div",{className:t+" "},r.default.createElement("p",{className:"m-0"},e.title)),r.default.createElement("div",{className:o+" "},r.default.createElement("p",{className:"mt-quarter mb-0"},e.subtitle))):this.state.selectedOption.title}},{key:"renderAriaLabelContent",value:function(e){if("object"===(void 0===e?"undefined":n(e))){var t=e.title,o=void 0===t?"":t,i=e.subtitle;return""+o+(void 0===i?"":i)}return this.state.selectedOption.title}},{key:"render",value:function(){var e=this,t=this.props,o=t.DropdownOptions,n=t.multi,i=t.titleClass,s=t.subtitleClass,d=t.onSelectOption,c=t.disabled,p=t.name,f=t.id,O=t.auid,m=void 0===O?"":O,v=this.state,b=v.selectedOption,y=v.isDropdownOpen,_=v.activeListItem,D=v.hoveredListItem;this.manageActiveListeners();var E,R=this.renderAriaLabelContent(b);return r.default.createElement("div",{name:p,id:f,ref:this.setWrapperRef,className:""+(E=this.props,(0,a.css)("position:relative;ul{margin:0;padding:0;width:100%;list-style-type:none;max-height:",E.maxHeight?E.maxHeight:"10rem",";overflow-y:auto;overflow-x:hidden;position:absolute;background:#fff;z-index:",E.zIndex?E.zIndex:"4",";border-radius:",E.listborderradius?E.listborderradius:"5px",";box-shadow:0 4px 12px 0 rgba(0,0,0,0.08),0 4px 8px 0 rgba(0,0,0,0.04),0 1px 5px 0 rgba(0,0,0,0.12);li{@media screen and (min-width:768px){font-size:1rem;}font-size:0.8rem;padding:",E.listItemPadding?E.listItemPadding:"0.75rem 1rem",";min-height:",E.multi?"4.5rem":"3rem",";height:auto;overflow:hidden;text-overflow:ellipsis;font-weight:normal;cursor:",l.ENABLED_CURSOR,";&:hover{background:",l.HOVER_BACKGROUND_COLOR,";.dp_list_anchor,span{color:",l.HOVER_FOREGROUND_COLOR,";}&.disabled{background:",l.DISABLED_HOVER_BACKGROUND_COLOR,";.dp_list_anchor,span{color:",l.DISABLED_HOVER_FOREGROUND_COLOR,";}cursor:",l.DISABLED_CURSOR,";}}&.disabled{background:",l.DISABLED_HOVER_BACKGROUND_COLOR,";color:",l.DISABLED_HOVER_FOREGROUND_COLOR,";cursor:",l.DISABLED_CURSOR,";}&.disabledKeySelected{background:",l.DISABLED_HOVER_BACKGROUND_COLOR,";.dp_list_anchor,span{color:",l.DISABLED_HOVER_FOREGROUND_COLOR,";}cursor:",l.DISABLED_CURSOR,";}&.keySelected{background:",l.KEYBOARD_SELECTED_BACKGROUND_COLOR,";.dp_list_anchor,span{color:",l.KEYBOARD_SELECTED_FOREGROUND_COLOR,";}&:hover{background:",l.HOVER_BACKGROUND_COLOR,";.dp_list_anchor,span{color:",l.HOVER_FOREGROUND_COLOR,";}}}&.active{background:",l.HOVER_BACKGROUND_COLOR,";.dp_list_anchor,span{color:",l.HOVER_FOREGROUND_COLOR,";}}&:first-child{&:hover{border-radius:",E.listborderradius?E.listborderradius:"5px"," ",E.listborderradius?E.listborderradius:"5px"," 0 0;}}&:last-child{&:hover{border-radius:0 0 ",E.listborderradius?E.listborderradius:"5px"," ",E.listborderradius?E.listborderradius:"5px",";}}& .dp_list_anchor{text-decoration:none;color:#000;cursor:pointer;&:focus,&:hover{outline:none;}}}}",E.className,";"))},r.default.createElement("button",{type:"button","data-auid":m,className:""+function(e){return(0,a.css)("display:flex;flex-grow:1;justify-content:space-between;align-items:center;padding:",e.padding?e.padding:"8px 16px 8px 12px",";@media screen and (min-width:768px){font-size:1rem;}font-size:0.8rem;width:",e.width?e.width:"100%",";height:",e.height?e.height:"3.5rem auto",";line-height:1.25;position:relative;z-index:1;background-color:#fff;overflow:hidden;text-overflow:ellipsis;border:",e.borderwidth?e.borderwidth:"1px"," solid ",e.bordercolor?e.bordercolor:"#ccc",";border-radius:",e.borderradius?e.borderradius:"4px",";",e.className,";")}(this.props),disabled:c,onClick:function(t){return e.toggleDropdownState(t)},"aria-expanded":y,"aria-haspopup":"true",ref:this.dropDownRef,"aria-label":R,onKeyPress:function(t){return e.handleKeyboardEvents(t)}},this.renderButtonContents(b,i,s),r.default.createElement("span",{"aria-expanded":y,className:y?"d-flex justify-content-end academyicon icon-chevron-up "+u:"justify-content-end academyicon icon-chevron-down "+u})),y&&r.default.createElement("div",{id:"menuRef"},r.default.createElement("ul",{"data-auid":(m||"ul")+"_dropdownList",id:"customDropdownList",className:function(e){return(0,a.css)("width:",e.width,";")}(this.props)+" align-items-center"},r.default.createElement(h,{multi:n,titleClass:i,subtitleClass:s,options:o,onSelect:function(t,o){return e.onSelectWrapper(t,d,o)},activeListItem:_,hoveredListItem:D}))))}}]),t}(),h=function(e){return e.multi?e.options.map(function(t,o){return t.subtitle?r.default.createElement("li",{"data-auid":(e.auid||"li")+"_listOption_"+o,className:"dp_list_options "+O(e,o,t),key:t.title,"data-idx":o,"data-value":t.value,onClick:function(){return e.onSelect(t,o)}},r.default.createElement("a",{className:"dp_list_anchor",href:"#",onClick:function(e){return e.preventDefault()},"aria-label":e.activeListItem===o?t.title+" - selected":t.title},r.default.createElement("span",{className:e.titleClass+" d-block"},t.title),r.default.createElement("span",{className:e.subtitleClass+" d-block"},t.subtitle))):r.default.createElement("li",{"data-auid":(e.auid||"li")+"_listOption_"+o,className:"dp_list_options "+O(e,o,t,"d-flex align-items-center"),key:t.title,"data-idx":o,"data-value":t.value,onClick:function(){return e.onSelect(t,o)}},r.default.createElement("a",{className:"dp_list_anchor",href:"#",onClick:function(e){return e.preventDefault()},"aria-label":e.activeListItem===o?t.title+" - selected":t.title},r.default.createElement("span",{className:e.titleClass+" "},t.title)))}):e.options.map(function(t,o){return r.default.createElement("li",{"data-auid":(e.auid||"li")+"_listOption_"+o,className:"dp_list_options "+O(e,o,t),key:t.title,"data-idx":o,"data-value":t.value,onClick:function(){return e.onSelect(t,o)}},r.default.createElement("a",{className:"dp_list_anchor",href:"#",onClick:function(e){return e.preventDefault()},"aria-label":e.activeListItem===o?t.title+" - selected":t.title},r.default.createElement("span",{className:e.titleClass},t.title)))})},O=function(e,t,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=n;return o.disabled&&(i+=" disabled",e.hoveredListItem===t&&(i=n+" disabledKeySelected")),o.disabled||e.activeListItem!==t||(i+=" active"),o.disabled||e.hoveredListItem!==t||(i+=" keySelected"),i};f.defaultProps={disabled:!1},f.propTypes={DropdownOptions:s.default.array.isRequired,titleClass:s.default.oneOfType([s.default.string,s.default.object]),multi:s.default.bool,subtitleClass:s.default.oneOfType([s.default.string,s.default.object]),onSelectOption:s.default.func,initiallySelectedOption:s.default.number,disabled:s.default.bool,name:s.default.string.isRequired,id:s.default.string.isRequired,placeholderOption:s.default.object,auid:s.default.string},t.default=f}})});